name: Check for Conflicts

on:
  pull_request:
    branches:
      - develop

jobs:
  rebase-check:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Check for conflicts with develop
        run: |
          git fetch origin develop
          git checkout ${{ github.event.pull_request.head.ref }}
          git rebase origin/develop

      - name: Success message
        if: success() # Condition : L'√©tape pr√©c√©dente a r√©ussi
        run: echo " Tout est OK ':' La branche est align√©e avec develop."

      - name: Error message if conflicts are detected
        if: failure() # Condition : L'√©tape pr√©c√©dente a √©chou√©
        run: echo "üö® Conflit d√©tect√© ':' Rebasez votre branche sur 'develop' et r√©solvez les conflits avant de soumettre la PR."
